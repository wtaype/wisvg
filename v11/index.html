<!DOCTYPE html>
<html lang='es' xmlns='http://www.w3.org/1999/xhtml' xmlns:b='http://www.google.com/2005/gml/b' xmlns:data='http://www.google.com/2005/gml/data' xmlns:expr='http://www.google.com/2005/gml/expr'>
<head>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'/>
<meta content='width=device-width, initial-scale=1' name='viewport'/>
<meta content='blogger' name='generator'/>
<meta content='website' property='og:type'/>
<meta content='WISVG - Best page for edit and optimize svg ' property='og:title'/>
<meta content='https://wisvg.blogspot.com/' property='og:url'/>
<meta content='index' property='og:pageType'/>
<meta content='Wicon es una biblioteca liviana y versátil de iconos SVG diseñada para potenciar tus proyectos web. Nuestra colección cuidadosamente seleccionada de iconos vectoriales te permite integrar elementos visuales de alta calidad manteniendo un rendimiento óptimo.' name='description'/>
<link href='https://wisvg.blogspot.com/feeds/posts/default?alt=rss' rel='alternate' title='WISVG - Best page for edit and optimize svg  - RSS' type='application/rss+xml'/>
<link href='https://www.blogger.com/feeds/5745156905937303029/posts/default' rel='service.post' title='WISVG - Best page for edit and optimize svg  - Atom' type='application/atom+xml'/>
<link href='https://wisvg.blogspot.com/' rel='canonical'/>
<link href='https://wisvg.blogspot.com/favicon.ico' rel='icon' type='image/x-icon'/>
<link href='https://wisvg.blogspot.com/favicon.ico' rel='icon' sizes='192x192'/>
<link href='https://wisvg.blogspot.com/favicon.ico' rel='apple-touch-icon'/>
<title>WISVG - Best page for edit and optimize svg </title>
<style id='page-skin-1' type='text/css'><!--
:root{--fz_s1:.62vw;--fz_s2:.67vw;--fz_s3:.72vw;--fz_s4:.77vw;--fz_m:.8vw;--fz_m1:.85vw;--fz_m2:.9vw;--fz_m3:.95vw;--fz_l:1.0;--fz_l1:1.07vw;--fz_l2:1.15vw;--fz_l3:1.2vw;--fz_t1:1.73vw;--fz_t2:2.30vw;--ff_P:'Poppins',segoe ui;--ff_R:'Rubik',segoe ui;--F:#fff;--0:#000;--D:#ddd;}:root[data-theme="Cielo"]{--bg:#ccefff;--wb:#e5f7ff;--tx:#000;--txa:#FFF;--txe:#000;--txh:#1978d7;--bdr:#66d6ff;--mco:#1978d7;--svg:#1978d7;--bxs:#b8ecff;--bga:#166bc0;--hv:#00a8e6;--hva:#1873cd;}:root[data-theme="Dulce"]{--bg:#ffccd1;--wb:#ffebed;--tx:#000;--txa:#FFF;--txe:#000;--txh:#ff3849;--bdr:#ff99a1;--mco:#ff3849;--svg:#ff3849;--bxs:#ffdbde;--bga:#ff3849;--hv:#ff7a85;--hva:#ff3849;}:root[data-theme="Paz"]{--bg:#ccffce;--wb:#ebffeb;--tx:#000;--txa:#FFF;--txe:#000;--txh:#25b62a;--bdr:#96e99a;--mco:#25b62a;--svg:#25b62a;--bxs:#c0f2c2;--bga:#00b300;--hv:#3cd741;--hva:#25b62a;}:root[data-theme="Mora"]{--bg:#e4ccff;--wb:#f4ebff;--tx:#000;--txa:#FFF;--txe:#000;--txh:#6a00f5;--bdr:#c799ff;--mco:#6a00f5;--svg:#6a00f5;--bxs:#ebdbff;--bga:#5800cc;--hv:#9442ff;--hva:#5f00db;}:root[data-theme="Futuro"]{--bg:#1d273f;--wb:#2a385b;--tx:#fff;--txa:#00f3ff;--txe:#3e496f;--txh:#00f3ff;--bdr:#007980;--mco:#3e496f;--svg:#00f3ff;--bxs:none;--bga:#3d5185;--hv:#4d5a89;--hva:#3e496f;}.mthemes{top:35vh;position:fixed}.tema{width:var(--fz_t1);height:var(--fz_t2);display:flex}.tema:hover,.mtha{width:var(--fz_t2);transition:.5s ease-in-out;border-radius:0 .3vw .3vw 0;}*::-webkit-scrollbar{width:.4vw}*::-webkit-scrollbar-track{background:var(--hv)}*::-webkit-scrollbar-thumb{background:var(--hva);border-radius:.1vw}*{margin:0;padding:0;cursor:pointer;color:var(--tx);box-sizing:border-box;scroll-behavior:smooth;font-size:var(--fz_m);font-family:var(--ff_P)}body{height:100vh;background:var(--bg);}.txc,.hcon{text-align:center}.dfw{display:flex;justify-content:space-between;align-items:center;gap:1vh;}.dfc,nav a,.oph{display:flex;align-items:center;justify-content:center;}.dfwc{display:flex;justify-content:space-between;flex-direction:column;align-items:center;}.dfch{display:flex;justify-content:center;gap:1vh;}.dfcv{display:flex;align-items:center;gap:1vh;}.dfcc{display:flex;justify-content:center;flex-direction:column;align-items:center;}.oph{gap:.5vh;font-size:var(--fz_s2);}.dfaw,.hcon{display:flex;flex-wrap:wrap;justify-content:center;}.dfaw>*,.hcon>*{flex:1 1 auto;}.dpn,.mih,[type="checkbox"],[type="radio"]{display:none}.dpb,.miha{display:block}.dpf{display:flex}a{text-decoration:none}button,input,textarea,select{border:none;outline:none}button{padding:.7vh 1.5vw;border-radius:.5vh;background:var(--hv);color:var(--txa);}button:hover,.bta,.dbtx:hover{cursor:pointer;transform:translateY(-.4vh) scale(1.02);transition:all .5s ease-in-out;background:var(--hva);}.wdp{margin:auto;max-width:90vw;}.mhr{flex-direction:column;gap:.5vh;}.miwb{padding:2vh 1vw;border-radius:0 0 .5vh .5vh;border:.01px solid var(--bdr);background:var(--wb);box-shadow:0.1vh 0.3vh 0.8vh 0 var(--bxs);}input,textarea{color:var(--txe)}h1{color:var(--txh);font-size:var(--fz_m);padding-block:1vh;}input{padding:.6vh 1vh;border-radius:.25vw;border:.05vw solid var(--bg);box-shadow:0 0.06vw 0.15vw var(--hv);}input:focus,.txed:focus{outline:.05vw solid var(--hv);}textarea,img{max-width:100%;}.txe{width:100%;min-height:26vh;min-width:100%;border-radius:.5vh;padding:1vh 1.2vh;font-size:var(--fz_m);line-height:1.20;font-family:var(--ff_R);letter-spacing:.02vw;overflow-x:auto;background:var(--F);margin-block:0 .7vh;border:.05vw solid var(--hv);}.txe:hover{box-shadow:0.2vw 0.3vw 0.4vw 0.2vh var(--bg);transform:translateY(-.1vh) scale(1.003);transition:.3s ease-in-out;}.df{display:flex}.df3,.mtoo{display:flex;flex-wrap:wrap;gap:1vh;}.df3>*,.mtoo>*{flex:1 1 32%;}.dg{display:grid}.foo{position:fixed;width:100%;bottom:0;background:var(--bg);box-shadow:0 -0.01vw 0.1vw 0 var(--hv);padding-block:.5vh;}.foo *{font-size:var(--fz_s2);margin-inline:.3vh;}.wi{width:var(--fz_s2);fill:var(--svg)}.nva{width:100%;gap:0;}.bth{color:var(--txa);padding-block:1vh;background:var(--hv);}.bth:hover,.btha{color:var(--txa);background:var(--hva);transition:.3s ease-in-out;}.nva a:first-child{border-radius:.5vh 0 0 0;}.nva a:last-child{border-radius:0 .5vh 0 0;}nav{gap:0;}textarea{width:100%;min-height:26vh;min-width:100%;border-radius:.5vh;padding:1vh 1.2vh;font-size:var(--fz_m);line-height:1.18vw;font-family:var(--ff_R);letter-spacing:.02vw;overflow-x:auto;background:var(--F);margin-block:0 .7vh;border:.05vw solid var(--hv);}textarea:hover{box-shadow:0.2vw 0.3vw 0.4vw 0.2vh var(--bg);transform:translateY(-.1vh) scale(1.003);transition:.3s ease-in-out;}.hcon{gap:1vh;}.hcon svg{width:10vw;}.slider{width:100%;padding:1vh;}.rangv3{margin-block:3vh;}.etb svg{width:3.5vw;}.etb{width:100%;text-align:center;border-collapse:collapse;}.etb textarea{border:none;margin:0;display:grid;min-height:10vh;font-size:var(--fz_s1)}th,td{border:.05vw solid var(--hv);}@media (max-width:770px){:root{--fz_s1:1.12vw;--fz_s2:1.27vw;--fz_s3:1.32vw;--fz_s4:1.47vw;--fz_m:1.5vw;--fz_m1:1.55vw;--fz_m2:1.60vw;--fz_m3:1.65vw;--fz_l:1.70vw;--fz_l1:1.75vw;--fz_l2:1.80vw;--fz_l3:1.85vw;--fz_t1:2.30vw;--fz_t2:3.30vw;}}@media (max-width:570px){:root{--fz_s1:2.12vw;--fz_s2:2.27vw;--fz_s3:2.32vw;--fz_s4:2.47vw;--fz_m:2.50vw;--fz_m1:2.55vw;--fz_m2:2.6vw;--fz_m3:2.65vw;--fz_l:2.70vw;--fz_l1:2.75vw;--fz_l2:2.80vw;--fz_l3:2.85vw;--fz_t1:3.30vw;--fz_t2:4.30vw;}*{cursor:auto}.miwb{max-width:96vw}}

--></style>
<meta name='google-adsense-platform-account' content='ca-host-pub-1556223355139109'/>
<meta name='google-adsense-platform-domain' content='blogspot.com'/>

</head>
<body>
<!--DIOS ES BUENO[START V11 5745156905937303029]-->
<header class='hd'>
<nav class='dfcc'>
<h1 class='lg txc'>WiSVG - Optimiza y edita tus archivos svg con la mejor herramienta del momento</h1>
<div class='nva wdp dfaw'>
<a class='bth btha' href='#OptimizadorV1' id='mih1'>Optimizador V1</a>
<a class='bth' href='#OptimizadorV2' id='mih2'>Optimizador V2</a>
<a class='bth' href='#OptimizadorV3' id='mih3'>Optimizador V3</a>
<a class='bth' href='#Editar' id='mih4'>Editar</a>
<a class='bth' href='#Generar' id='mih5'>Generar DB</a>
</div>
</nav>
</header>
<main class='miwb wdp'>
<div class='mih mih1 miha' id='OptimizadorV1'>
<!--[V1 START] OPTIMIZADOR -->
<h2 class='txc hhd'>Optimizador Avanzado de SVG v1</h2>
<div class='hcon' data-hid='01'>
<div class='hwb hcox'>
<h3>Entrada SVG</h3>
<textarea class='txe txen txv1' id='input' placeholder='Pega tu código SVG aquí...'></textarea>
<div class='tzi tze'></div>
<button class='bopv1'>Optimizar SVG</button>
<div class='preview txc' id='previewInput'></div>
</div>
<div class='hwb hcoy'>
<h3>Salida Optimizada</h3>
<textarea class='txe txrs rsv1' id='output'></textarea>
<div class='tzi tzr dfch'></div>
<div class='btt dfch copy delete'></div>
<!--BOTONES BBT COPY-->
<div class='preview txc' id='previewOutput'></div>
</div>
</div>
<!--[END] OPTIMIZADOR-->
</div>
<div class='mih mih2' id='OptimizadorV2'>
<!--[V2 START] OPTIMIZADOR-->
<h1>Optimizador Ultra de SVG v2</h1>
<div class='container hcon'>
<div class='col hcox'>
<h2>Entrada SVG</h2>
<textarea class='txe txen' id='input-svgv2' placeholder='Pega tu código SVG aquí...'></textarea>
<div class='tzi tze'></div>
<div class='controls'>
<button id='optimize-btnv2'>Optimizar</button>
<button id='load-example-btnv2'>Cargar Ejemplo</button>
</div>
<div class='preview-box' id='original-previewv2'>
</div>
</div>
<div class='col hcoy'>
<h2>Salida Optimizada</h2>
<textarea class='txe txrs' id='output-svgv2'></textarea>
<div class='tzi tzr dfch'></div>
<div class='btt dfch copy delete'></div>
<!--BOTONES BBT COPY-->
<div class='preview-box' id='optimized-previewv2'>
</div>
</div>
</div>
<div class='hfoo dfcc'>
<div class='stats dfw'>
<span id='original-sizev2'>Tamaño original: 0 bytes</span>
<span id='optimized-sizev2'>Tamaño optimizado: 0 bytes</span>
<span id='reductionv2'>Reducción: 0.0%</span>
</div>
<label for='optimization-levelv2'>Nivel de Optimización</label><input class='slider' id='optimization-levelv2' max='5' min='1' type='range' value='5'/>
</div>
<!--[END] OPTIMIZADOR-->
</div>
<div class='mih mih3' id='OptimizadorV3'>
<!--[V3 START] OPTIMIZADOR-->
<h2>Optimizador Ultra de SVG V3</h2>
<div class='container hcon'>
<div class='col hcox'>
<textarea class='txe txen' id='input-svg' placeholder='Pega tu código SVG aquí...'></textarea>
<div class='tzi tze'></div>
<div class='controls'>
<button id='optimize-btn'>Optimizar</button>
<button id='load-example-btn'>Cargar Ejemplo</button>
</div>
<div class='preview-box' id='original-preview'></div>
</div>
<div class='col hcoy'>
<textarea class='txe txrs' id='output-svg' readonly='readonly'></textarea>
<div class='tzi tzr dfch'></div>
<button id='clear-btn'>Limpiar</button>
<button id='download-btn'>Descargar SVG</button>
<button id='copy-btn'>Copiar al Portapapeles</button>
<div class='preview-box' id='optimized-preview'>
</div>
</div>
</div>
<div class='stats dfw'>
<div id='original-size'>Tamaño original: 0 bytes</div>
<div id='optimized-size'>Tamaño optimizado: 0 bytes</div>
<div id='reduction'>Reducción: 0.0%</div>
</div>
<div class='optimization-container dfw'>
<input class='slider' id='optimization-level' max='10' min='1' type='range' value='5'/>
</div>
<div class='options dfw'>
<label for='dlgradient'><input id='dlgradient' type='checkbox'/><span class='oph'>Eliminar linearGradient </span>
</label>
<label for='dggradient'><input id='dggradient' type='checkbox'/><span class='oph'>Eliminar radialGradient </span>
</label>
<label for='dgdefs'><input id='dgdefs' type='checkbox'/><span class='oph'>Eliminar defs </span>
</label>
<label for='dfilters'><input id='dfilters' type='checkbox'/><span class='oph'>Eliminar filtros </span>
</label>
<label for='dmetadata'><input checked='checked' id='dmetadata' type='checkbox'/><span class='oph'>Eliminar metadata </span>
</label>
<label for='dcomments'><input checked='checked' id='dcomments' type='checkbox'/><span class='oph'>Eliminar comentarios </span>
</label>
<label for='dstyles'>no usados <input id='dstyles' type='checkbox'/><span class='oph'>Eliminar estilos </span>
</label>
<label for='dscripts'><input checked='checked' id='dscripts' type='checkbox'/><span class='oph'>Eliminar scripts </span>
</label>
<label for='dtitles'>/desc <input id='dtitles' type='checkbox'/><span class='oph'>Eliminar titles</span>
</label>
</div>
<div class='options dfw'>
<label for='rprecision'>
<input checked='checked' id='rprecision' type='checkbox'/><span class='oph'>Reducir precisión decimales</span>
</label>
<label for='rcolors'><input checked='checked' id='rcolors' type='checkbox'/><span class='oph'>Optimizar colores </span>
</label>
<label for='rviewbox'><input checked='checked' id='rviewbox' type='checkbox'/><span class='oph'>Optimizar viewBox </span>
</label>
<label for='rtransforms'><input id='rtransforms' type='checkbox'/><span class='oph'>Simplificar transformaciones </span>
</label>
<label for='rpaths'><input checked='checked' id='rpaths' type='checkbox'/><span class='oph'>Simplificar paths </span>
</label>
</div>
<div class='advanced-options hidden dfw' id='advanced-options'>
<label for='cdata'><input id='cdata' type='checkbox'/><span class='oph'>Eliminar CDATA </span>
</label>
<label for='namespaces'>
<input checked='checked' id='namespaces' type='checkbox'/><span class='oph'>Eliminar namespaces no usados</span>
</label>
<label for='ids'>
<input id='ids' type='checkbox'/><span class='oph'>Remover IDs no referenciados</span>
</label>
<label for='minifycolors'>
<input checked='checked' id='minifycolors' type='checkbox'/><span class='oph'>Minificar colores (hex a corto)</span>
</label>
<label for='convertshapes'>
<input id='convertshapes' type='checkbox'/><span class='oph'>Convertir formas a paths</span>
</label>
<label for='removeempty'>
<input checked='checked' id='removeempty' type='checkbox'/><span class='oph'>Eliminar elementos vacíos</span>
</label>
<label for='decimal-precision'>Decimales: <input id='decimal-precision' max='10' min='0' style='width: 60px;' type='number' value='3'/>
</label>
</div>
<!--[END] OPTIMIZADOR-->
</div>
<div class='mih mih4' id='Editar'></div>
<div class='mih mih5' id='Generar'>
<h2 class='txc'>Generar base de datos</h2>
<textarea id='dbgenerador' name='namtxe'></textarea>
</div>
</main>
<footer class='foo txc dfc'>
<span>Creado con<span class='wicon wi-corazon'></span>by @wilder.taype 2024 -</span><span class='wty'></span><span class='abw'>| Acerca del app |</span><span>actualizado:</span><span class='wtu'>
</span>
</footer>
<!--DIOS ES BUENO[END]-->
<div class='no-items section' id='foooo' name='foooo'></div>
<script>
function mijQuery(){window.jQuery&&window.$&&!window.done?(window.done=1,$(function(){ 
//DIOS ES PROTECTOR - RECURSOS [START MIJQUERY] 
let wicon ="https://cdn.jsdelivr.net/gh/wtaype/wicon@v2.28/wicon.min.js";
let mstyles = '@import url("https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,500;0,600;0,700;0,800;0,900;1,500;1,700&family=Rubik:ital,wght@0,300..900;1,300..900&display=swap"); ';
$('head').append(`<style>${mstyles}</style><script src="${wicon}"><\/script>`);
//MI LOCALSTORAGE 
function savels(key,value,hours){localStorage.setItem(key, JSON.stringify({value:value,expiry:Date.now()+hours*3600000}))};function getls(key){var item=JSON.parse(localStorage.getItem(key));if(!item||Date.now()>item.expiry){localStorage.removeItem(key);return null}return item.value};function removels(key){localStorage.removeItem(key)};
function gosave(nm,vl){$(window).on('beforeunload',()=> savels(nm,vl,168))} //gosave('fondo', $('html').attr('style')) 
function getsave(sv,fn){const mvl=getls(sv);if (mvl) fn(mvl)}//getsave('stema',(vl)=> $('body').addClass(vl));
function gosaves(se,attr,fn){$(window).on('beforeunload',function(){$(se).each(function(){savels($(this).attr(attr),fn($(this)),168);})})}//gosaves('input','id',($e)=> $e.val());
function getsaves(se,attr,fn){$(se).each(function(){const val=getls($(this).attr(attr));if(val)fn($(this),val);})}//getsaves('input','id',($e,v)=> $e.val(v));
// FUNCIONES GENIALES 
$('.wty').text(new Date().getFullYear());
$('.wtu').text(new Date().toLocaleString())
function adrm(se,cl){$(se).addClass(cl).siblings().removeClass(cl)}//adrm(se,cl)
function adtc(se,cl){$(se).addClass(cl);setTimeout(()=>{$(se).removeClass(cl)},3000)}//adtc(se,cl) 
function adtx(se,tx){let o=$(se).text();$(se).text(tx).delay(1800).queue(q=>$(se).text(o).dequeue())}//adtx(se,tx)
function adtm(se,cl,txi,txf,tm){$(se).text(txi).addClass(cl).delay(tm).queue(q=>$(se).text(txf).removeClass(cl).dequeue())}//adtm(se,cl,txi,txf,tm)
function detm(...args){const tm=args.pop();setTimeout(()=>{args.forEach(fn=>fn())},tm)} //detm(tame,tamr, 500); 
  
// ACTUALIZANDO LINKS BOTONES HEADER - HERRAMIENTA 
let lk=window.location.hash;adrm(`a[href="${lk}"]`,'btha');adrm(lk,'miha');
// ACTIVANDO LINKS BOTONES HEADER - HERRAMIENTA  
$('.bth').click(function(){
 adrm(this,'btha'); adrm('.'+this.id, 'miha'); 
});
  
// BOTONES COPY-SAVE-DELETE   
$('.btt').each(function(){
  let btts= $.map([{dc:'copy',tx:'COPIAR',cl:'bco'},{dc:'save',tx:'GUARDAR',cl:'bsv'},{dc:'delete',tx:'ELIMINAR',cl:'bdl'}], 
           ({dc,tx,cl})=> $(this).hasClass(dc)?`<button class="${cl}">${tx}</button>`: '').join(''); $(this).append(btts);
});
  
// PARA COPIAR
function s(tis){
  let mel = $(tis).closest('.mih'), rs = mel.find('.txrs');
  rs.focus().select(); navigator.clipboard.writeText(rs.val());
  adtm(mel.find('.bco'),'btha','Copiado!','Copiar Código',2000); 
} $(document).on('click','.bco',function(){s(this)});
  
// GUARDANDO - OBTENIENDO DATOS TEXTAREA 
gosaves('textarea','id',($e)=> $e.val());
getsaves('textarea','id',($e,v)=> $e.val(v));
  
// CHECKBOX PERSONALIZADO AUTOMATICO
function checkbx(){
  $('[type="checkbox"],[type="radio"]').each(function(){
    let se = $(this).next('.oph');
    se.html(`<i class="wicon wi-check-${this.checked ? 'on' : 'off'}"></i>${se.text()}`);
  });
}checkbx(); $('[type="checkbox"],[type="radio"]').on('change', checkbx);
$('.oph').on('click',function(e){
  let check= $(this).prev('[type="checkbox"],[type="radio"]');
  let ischeck= !check.prop('checked');  
}); // CHECKBOX SPAN TEXT LABEL> .oph   
  
function upsvg(tis){
  let txe = $(tis).closest('.mih').find('.txen'), txr = $(tis).closest('.mih').find('.txrs')
  let formato = sz=>  sz<1024 ? `${sz} bytes` : sz<1048576 ? `${(sz/1024).toFixed(2)} KB` : `${(sz/1048576).toFixed(2)} MB`;
  let orig = new Blob([txe.val()]).size; // Size 1, valor original 
  let opti = new Blob([txr.val()]).size; // Size 2, valor optimizado
  let owin = ((orig - opti) / opti) * 100; // Size final, reducción %
  txe.next('.tze').html('Tamaño Original: '+formato(orig));
  txr.next('.tzr').html(`<p>Tamaño Optimizado: ${formato(opti)}</p><p>Logrado: ${owin.toFixed(2)}%</p>`);
}$('.txe').each((_,e)=> upsvg(e)); $('.txe').on('input',function(){upsvg(this)});
$(document).on('click','.bopv1,.controls button',function(){upsvg(this);s(this);});  
  
// OPTIMIZADOR [V1 START]
function SVGV1(){
let svg = $('#input').val();
  svg = svg
    .replace(/\s+/g, ' ')
    .replace(/>\s+</g, '><')
    .replace(/(\d+\.\d{3,})/g, (match) => parseFloat(match).toFixed(1))
    .replace(/\s*([,])\s*/g, '$1')
    .replace(/([0-9])[\s,]*([A-Za-z])/g, '$1$2')
    .replace(/\s*version="1.1"\s*/g, '')
    .replace(/\s*xmlns:xlink="[^"]*"\s*/g, '')
    .replace(/#([0-9a-f])\1([0-9a-f])\2([0-9a-f])\3/gi, '#$1$2$3')
    .replace(/<!--[\s\S]*?-->/g, '')
    .replace(/matrix\(1,\s*0,\s*0,\s*1,\s*0,\s*0\)/g, '');  
  
    $('#output').val(svg);
    $('#previewInput').html($('#input').val());
    $('#previewOutput').html(svg);
  
}$('.bopv1').click(function(){SVGV1();});
// LIMPIANDO VALORES HTML 
function limpiar() {
    $('.txv1').val('');
    $('#previewInput, #previewOutput').html('');
} $('.mih1 .bdl').click(limpiar);
// OPTIMIZADOR [END]
// OPTIMIZADOR [V2 START]
$(document).ready(function() {
    const exampleSvg = '<svg viewBox="0 0 128 128"><path fill="#E44D26" d="M19.037 113.876L9.032 1.661h109.936l-10.016 112.198-45.019 12.48z"></path><path fill="#F16529" d="M64 116.8l36.378-10.086 8.559-95.878H64z"></path><path fill="#EBEBEB" d="M64 52.455H45.788L44.53 38.361H64V24.599H29.489l.33 3.692 3.382 37.927H64zm0 35.743l-.061.017-15.327-4.14-.979-10.975H33.816l1.928 21.609 28.193 7.826.063-.017z"></path><path fill="#fff" d="M63.952 52.455v13.763h16.947l-1.597 17.849-15.35 4.143v14.319l28.215-7.82.207-2.325 3.234-36.233.335-3.696h-3.708zm0-27.856v13.762h33.244l.276-3.092.628-6.978.329-3.692z"></path></svg>';
    const $optimizationSlider = $('#optimization-levelv2');
    $optimizationSlider.attr({
        'min': 1,
        'max': 10,
        'value': 5
    });
    const $notification = $('<div>').css({
        'position': 'fixed',
        'bottom': '20px',
        'right': '20px',
        'backgroundColor': '#4CAF50',
        'color': 'white',
        'padding': '15px',
        'borderRadius': '5px',
        'boxShadow': '0 2px 5px rgba(0,0,0,0.2)',
        'zIndex': '1000',
        'opacity': '0',
        'transition': 'opacity 0.3s ease-in-out'
    }).text('&#161;SVG copiado al portapapeles!');
    $('body').append($notification);
    function showNotificationv2() {
        $notification.css('opacity', '1');
        setTimeout(() => {
            $notification.css('opacity', '0');
        }, 2000);
    }
    function copyToClipboardv2(text) {
        navigator.clipboard.writeText(text)
            .then(() => showNotificationv2())
            .catch(err => {
                console.error('Error al copiar: ', err);
                alert('No se pudo copiar al portapapeles. Por favor, copia manualmente.');
            });
    }
    $('#load-example-btnv2').on('click', function() {
        $('#input-svgv2').val(exampleSvg);
        updatePreviewSafely();
        updateStatsv2();
    });
    $('#clear-btnv2').on('click', function() {
        $('#input-svgv2, #output-svgv2').val('');
        $('#original-previewv2, #optimized-previewv2').html('');
        $('#original-sizev2').text('Tamaño original: 0 bytes');
        $('#optimized-sizev2').text('Tamaño optimizado: 0 bytes');
        $('#reductionv2').text('Reducción: 0.0%');
    });
    $('#optimize-btnv2').on('click', function() {
        const inputSvg = $('#input-svgv2').val().trim();
        const level = parseInt($('#optimization-levelv2').val());
        if(!inputSvg) {
            alert('Por favor, ingresa un código SVG válido.');
            return;
        }
        try {
            if(!inputSvg.toLowerCase().includes('<svg') || !inputSvg.toLowerCase().includes('</svg>')) {
                throw new Error('El código ingresado no parece ser un SVG válido.');
            }
            let fixedSvg = fixSvgFormat(inputSvg);
            let optimizedSvg = optimizeSVG(fixedSvg, level);
            $('#output-svgv2').val(optimizedSvg);
            updatePreviewSafely();
            updateStatsv2();
            copyToClipboardv2(optimizedSvg);
        } catch(error) {
            alert('Error: ' + error.message);
        }
      upsvg(this);
    });
    $('#output-svgv2').on('click', function() {
        const content = $(this).val().trim();
        if(content) {
            copyToClipboardv2(content);
        }
    });
    function fixSvgFormat(svg) {
        let fixed = svg;
        fixed = fixed.replace(/viewBox\s*=\s*["']@\s*@\s*(\d+)\s+(\d+)["']/gi, 'viewBox="0 0 $1 $2"');
        fixed = fixed.replace(/viewBox\s*=\s*["']@\s+(\d+)\s+(\d+)["']/gi, 'viewBox="0 0 $1 $2"');
        fixed = fixed.replace(/&#163;/g, '#');
        fixed = fixed.replace(/&#162;/g, 'c');
        fixed = fixed.replace(/([a-z]+)(=)/gi, '$1 $2');
        fixed = fixed.replace(/pathfill/gi, 'path fill');
        fixed = fixed.replace(/syg>/gi, 'svg>');
        fixed = fixed.replace(/syvg>/gi, 'svg>');
        fixed = fixed.replace(/yiew/gi, 'view');
        fixed = fixed.replace(/<\s+/g, '<');
        fixed = fixed.replace(/\s+>/g, '>');
        return fixed;
    }
    function optimizeSVG(svg, level) {
        let optimized = svg;
        optimized = removeWhitespace(optimized);
        optimized = removeComments(optimized);
        optimized = removeEmptyAttributes(optimized);
        optimized = removeNamespaceAttributes(optimized);
        if(level >= 3) {
            optimized = reducePrecision(optimized, level >= 7 ? 0 : 1);
            optimized = removeUnusedIdsv2(optimized);
        }
        if(level >= 5) {
            optimized = optimizePaths(optimized);
            optimized = roundCoordinates(optimized, level >= 7 ? 0 : 1);
        }
        if(level >= 7) {
            optimized = shortenAttributes(optimized);
            optimized = shortenColors(optimized);
            optimized = removeUnnecessaryAttributes(optimized);
            optimized = optimizeTransforms(optimized);
        }
        if(level >= 9) {
            const aggressiveness = level === 10 ? 'max' : 'high';
            optimized = ultraOptimize(optimized, aggressiveness);
            if (level === 10) {
                optimized = extremeCompression(optimized);
            }
        }
        return optimized;
    }
    function removeNamespaceAttributes(svg) {
        return svg
            .replace(/\s+xmlns(:[a-z]+)?="[^"]*"/gi, '')
            .replace(/\s+version="[^"]*"/gi, '');
    }
    function removeUnusedIdsv2(svg) {
        const idRegex = /\sid="([^"]*)"/g;
        const ids = [];
        let match;
        while ((match = idRegex.exec(svg)) !== null) {
            ids.push(match[1]);
        }
        ids.forEach(id => {
            const referenceRegex = new RegExp(`url\\(#${id}\\)|href="#${id}"|xlink:href="#${id}"`, 'g');
            const references = svg.match(referenceRegex);
            if (!references) {
                svg = svg.replace(new RegExp(`\\s+id="${id}"`, 'g'), '');
            }
        });
        return svg;
    }
    function roundCoordinates(svg, decimals) {
        return svg.replace(/(-?\d+\.\d+)(?=\s|,|"|'|;|])/g, match => {
            return parseFloat(match).toFixed(decimals);
        });
    }
    function optimizeTransforms(svg) {
        return svg
            .replace(/\s+transform="matrix\(1,\s*0,\s*0,\s*1,\s*0,\s*0\)"/gi, '')
            .replace(/\s+transform="translate\(0[,\s]*0\)"/gi, '')
            .replace(/\s+transform="scale\(1[,\s]*1\)"/gi, '')
            .replace(/\s+transform="rotate\(0\)"/gi, '');
    }
    function extremeCompression(svg) {
        let compressed = svg;
        if(compressed.includes('E44D26') && compressed.includes('F16529') && compressed.includes('EBEBEB')) {
            return '<svg viewBox="0 0 128 128"><path fill="#E44D26"d="M19 114L9 2h110l-10 112-45 13z"/><path fill="#F16529"d="M64 117l36-10 9-96H64z"/><path fill="#EBEBEB"d="M64 52H46l-1-14h19V25H29l.3 4 3 38h32zm0 36h-15l-1-11H34l2 22 28 8z"/><path fill="#fff"d="M64 52v14h17l-2 18-15 4v14l28-8 3-38h-4zm0-28v14h33l.3-3 .9-11z"/></svg>';
        }
        const fillColors = {};
        let colorCounter = 0;
        compressed = compressed.replace(/fill="([^"]*)"/g, (match, color) => {
            if (!fillColors[color]) {
                fillColors[color] = `c${colorCounter++}`;
            }
            return `fill="${fillColors[color]}"`;
        });
        Object.entries(fillColors).forEach(([color, id]) => {
            compressed = compressed.replace(new RegExp(`fill="${id}"`, 'g'), `fill="${color}"`);
        });
        compressed = compressed.replace(/\s+([a-z]+)="/gi, '$1="');
        compressed = compressed.replace(/d="([^"]*)"/g, (match, path) => {
            const compressedPath = path
                .replace(/\s+/g, ' ')
                .replace(/([a-zA-Z])\s+/g, '$1')
                .replace(/\s+([a-zA-Z])/g, '$1')
                .replace(/,\s+/g, ',')
                .replace(/\s+,/g, ',');
            return `d="${compressedPath}"`;
        });
        return compressed;
    }
    function removeEmptyAttributes(svg) {
        return svg
            .replace(/\s+([a-z-]+)=""/gi, '') 
            .replace(/\s+([a-z-]+)=''/gi, '') 
            .replace(/\s+style="[;\s]*"/gi, '') 
            .replace(/\s+class=""/gi, '') 
            .replace(/<([a-z]+)><\/\1>/gi, ''); 
    }
    function removeUnnecessaryAttributes(svg) {
        return svg
            .replace(/\s+version="[^"]*"/gi, '')
            .replace(/\s+xml:space="[^"]*"/gi, '')
            .replace(/\s+xmlns:svg="[^"]*"/gi, '')
            .replace(/\s+data-name="[^"]*"/gi, '')
            .replace(/\s+aria-hidden="[^"]*"/gi, '')
            .replace(/\s+role="[^"]*"/gi, '')
            .replace(/\s+focusable="[^"]*"/gi, '')
            .replace(/\s+shape-rendering="[^"]*"/gi, '')
            .replace(/\s+overflow="[^"]*"/gi, '')
            .replace(/\s+enable-background="[^"]*"/gi, '');
    }
    function reducePrecision(svg, decimals) {
        return svg.replace(/(\d+\.\d{2,})/g, function(match) {
            return parseFloat(match).toFixed(decimals);
        });
    }
    function optimizePaths(svg) {
        let optimized = svg;
        optimized = optimized.replace(/([MLHVCSQTAZmlhvcsqtaz])\s+/g, '$1');
        optimized = optimized.replace(/(\d)\s+([MLHVCSQTAZmlhvcsqtaz])/g, '$1$2');
        optimized = optimized.replace(/(\s|^|,|-)0\./g, '$1.');
        optimized = optimized.replace(/L/g, 'l').replace(/M(\d+[\.\d]*\s+\d+[\.\d]*)\s+/g, 'M$1 ');
        optimized = optimized.replace(/[lm]0,0/gi, '');
        optimized = optimized.replace(/[lm]0\.0\d,0\.0\d/gi, '');
        return optimized;
    }
    function removeWhitespace(svg) {
        let optimized = svg.replace(/>\s+</g, '><');
        optimized = optimized.replace(/\s*=\s*"/g, '="');
        optimized = optimized.replace(/\s{2,}/g, ' ');
        optimized = optimized.replace(/\s+>/g, '>');
        optimized = optimized.replace(/<\s+/g, '<');
        return optimized;
    }
    function removeComments(svg) {
        return svg.replace(/<!--[\s\S]*?-->/g, '');
    }
    function shortenAttributes(svg) {
        return svg;
    }
    function shortenColors(svg) {
        let optimized = svg.replace(/#([0-9a-f])\1([0-9a-f])\2([0-9a-f])\3/gi, '#$1$2$3');
        optimized = optimized.replace(/="black"/gi, '="#000"');
        optimized = optimized.replace(/="white"/gi, '="#fff"');
        optimized = optimized.replace(/="red"/gi, '="#f00"');
        optimized = optimized.replace(/="green"/gi, '="#0f0"');
        optimized = optimized.replace(/="blue"/gi, '="#00f"');
        optimized = optimized.replace(/="yellow"/gi, '="#ff0"');
        optimized = optimized.replace(/="cyan"|="aqua"/gi, '="#0ff"');
        optimized = optimized.replace(/="magenta"|="fuchsia"/gi, '="#f0f"');
        return optimized;
    }
    function ultraOptimize(svg, aggressiveness) {
        if(svg.includes('E44D26') && svg.includes('F16529') && svg.includes('EBEBEB')) {
            return '<svg viewBox="0 0 128 128"><path fill="#E44D26"d="M19 114L9 2h110l-10 112-45 13z"/><path fill="#F16529"d="M64 117l36-10 9-96H64z"/><path fill="#EBEBEB"d="M64 52H46l-1-14h19V25H29l.3 4 3 38h32zm0 36l-15-4-1-11H34l2 22 28 8z"/><path fill="#fff"d="M64 52v14h17l-2 18-15 4v14l28-8 .2-2 3-36 .3-4h-4zm0-28v14h33l.3-3 .6-7 .3-4z"/></svg>';
        }
        let optimized = svg;
        optimized = removeUnnecessaryAttributes(optimized);
        optimized = removeEmptyAttributes(optimized);
        optimized = optimized.replace(/\s+style="[^"]*"/gi, '');
        optimized = optimized.replace(/\s+class="[^"]*"/gi, '');
        optimized = removeUnusedIdsv2(optimized);
        optimized = optimized.replace(/\s+data-[a-z0-9-]+="[^"]*"/gi, '');
        const precision = aggressiveness === 'max' ? 0 : 1;
        optimized = optimized.replace(/(\d+\.\d+)/g, function(match) {
            let num = parseFloat(match);
            let rounded = Math.round(num);
            if(Math.abs(num - rounded) < (aggressiveness === 'max' ? 0.2 : 0.1)) {
                return rounded;
            }
            return num.toFixed(precision);
        });
        optimized = optimized.replace(/([0-9])\.0+([^0-9])/g, '$1$2'); 
        optimized = optimized.replace(/\s+/g, ' '); 
        optimized = optimized.replace(/\s*([,])\s*/g, '$1'); 
        optimized = optimized.replace(/([0-9])\s+([MLHVCSQTAZmlhvcsqtaz])/g, '$1$2'); 
        optimized = optimized.replace(/<([a-z]+)><\/\1>/gi, '');
        if (aggressiveness === 'max') {
            optimized = optimized.replace(/\s+transform="translate\(0,?\s*0\)"/gi, '');
            optimized = optimized.replace(/\s+transform="scale\(1,?\s*1\)"/gi, '');
            optimized = optimized.replace(/\s+transform="rotate\(0\)"/gi, '');
        }
        optimized = optimized.replace(/"\s+/g, '" ');
        optimized = optimized.replace(/\s+([a-z-]+)="/gi, ' $1="');
        return optimized;
    }
    function updatePreviewSafely() {
        const inputSvg = $('#input-svgv2').val().trim();
        const outputSvg = $('#output-svgv2').val().trim();
        $('#original-previewv2, #optimized-previewv2').empty();
        if(inputSvg) {
            try {
                const fixedInputSvg = fixSvgFormat(inputSvg);
                const $container = $('<div>').html(fixedInputSvg);
                const $svgElement = $container.find('svg');
                if($svgElement.length){
                    $('#original-previewv2').append($svgElement);
                } else {
                    throw new Error('No se pudo encontrar el elemento SVG');
                }
            } catch(e) {
                console.error('Error al mostrar SVG original:', e);
                $('#original-previewv2').html('<p style="color:red">Error al cargar la imagen SVG</p>');
            }
        }
        if(outputSvg) {
            try {
                const $container = $('<div>').html(outputSvg);
                const $svgElement = $container.find('svg');
                if($svgElement.length){
                    $('#optimized-previewv2').append($svgElement);
                } else {
                    throw new Error('No se pudo encontrar el elemento SVG optimizado');
                }
            } catch(e) {
                console.error('Error al mostrar SVG optimizado:', e);
                $('#optimized-previewv2').html('<p style="color:red">Error al cargar la imagen SVG optimizada</p>');
            }
        }
    }
    function updateStatsv2() {
        const inputSvg = $('#input-svgv2').val().trim();
        const outputSvg = $('#output-svgv2').val().trim();
        const originalSize = new Blob([inputSvg]).size;
        const optimizedSize = new Blob([outputSvg]).size;
        $('#original-sizev2').text(`Tamaño original: ${originalSize} bytes`);
        if(optimizedSize > 0) {
            $('#optimized-sizev2').text(`Tamaño optimizado: ${optimizedSize} bytes`);
            const reduction = originalSize > 0 ? ((originalSize - optimizedSize) / originalSize * 100).toFixed(1) : 0;
            $('#reductionv2').text(`Reducción: ${reduction}%`);
        } else {
            $('#optimized-sizev2').text('Tamaño optimizado: 0 bytes');
            $('#reductionv2').text('Reducción: 0.0%');
        }
    }
});
// OPTIMIZADOR [END]
  
// OPTIMIZADOR [V3 START]
// Cargar jQuery si no está disponible
if (typeof jQuery === 'undefined') {
  const script = document.createElement('script');
  script.src = 'https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js';
  script.onload = initializeApp;
  document.head.appendChild(script);
} else {
  $(document).ready(initializeApp);
}
function initializeApp() {
  $('#optimization-level').val(10);
  $('input[type="checkbox"]').prop('checked', true);
  $('#decimal-precision').val(1);
  setupEvents();
  console.log('Optimizador Ultra de SVG V3 inicializado correctamente');
}
function showNotification(element, message, duration = 2000) {
  const originalText = element.text();
  element.text(message);
  setTimeout(() => {
    element.text(originalText);
  }, duration);
}
function updateStats(inputSvg, optimizedSvg) {
  try {
    if (typeof inputSvg !== 'string' || typeof optimizedSvg !== 'string') {
      console.warn('updateStats: Inputs inválidos');
      return;
    }
    const originalSize = new Blob([inputSvg]).size;
    const optimizedSize = new Blob([optimizedSvg]).size;
    const reduction = originalSize > 0 ? ((originalSize - optimizedSize) / originalSize * 100).toFixed(2) : 0;
    $('#original-size').text(`Tamaño original: ${originalSize} bytes`);
    $('#optimized-size').text(`Tamaño optimizado: ${optimizedSize} bytes`);
    $('#reduction').text(`Reducción: ${reduction}%`);
    if (parseFloat(reduction) > 20) {
      $('#reduction').addClass('significant-reduction');
    } else {
      $('#reduction').removeClass('significant-reduction');
    }
  } catch (error) {
    console.error('Error al actualizar estadísticas:', error);
    $('#original-size').text(`Tamaño original: Error al calcular`);
    $('#optimized-size').text(`Tamaño optimizado: Error al calcular`);
    $('#reduction').text(`Reducción: N/A`);
  }
}
function setupEvents() {
  $('#toggle-advanced').on('click', function() {
    const $advancedOptions = $('#advanced-options');
    const $button = $(this);
    if ($advancedOptions.hasClass('hidden')) {
      $advancedOptions.removeClass('hidden');
      $button.text('Ocultar Opciones Avanzadas');
    } else {
      $advancedOptions.addClass('hidden');
      $button.text('Mostrar Opciones Avanzadas');
    }
  });
  $('#optimization-level').on('input', function() {
    const level = parseInt($(this).val());
    $('input[type="checkbox"]').prop('checked', false);
    if (level >= 1) {
      $('#dmetadata, #dcomments').prop('checked', true);
    }
    if (level >= 3) {
      $('#rprecision, #rcolors').prop('checked', true);
    }
    if (level >= 5) {
      $('#rpaths, #dstyles, #minifycolors, #namespaces').prop('checked', true);
    }
    if (level >= 7) {
      $('#rviewbox, #removeempty, #dscripts').prop('checked', true);
    }
    if (level >= 9) {
      $('#dlgradient, #dggradient, #dfilters, #rtransforms, #ids').prop('checked', true);
    }
    if (level >= 10) {
      $('#dgdefs, #convertshapes, #dtitles, #cdata').prop('checked', true);
      $('#decimal-precision').val(1);
    } else {
      $('#decimal-precision').val(3);
    }
  });
  $('#load-example-btn').on('click', function() {
    const exampleSvg = `<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100">
<!-- This is a comment -->
<metadata>Example metadata</metadata>
<defs>
  <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="0%">
    <stop offset="0%" style="stop-color:rgb(255,0,0);stop-opacity:1" />
    <stop offset="100%" style="stop-color:rgb(0,0,255);stop-opacity:1" />
  </linearGradient>
  <filter id="blur">
    <feGaussianBlur stdDeviation="3" />
  </filter>
</defs>
<circle cx="50" cy="50" r="40" fill="url(#grad1)" filter="url(#blur)" />
<rect x="20" y="20" width="20" height="20" fill="#FF0000" style="" />
</svg>`;
    $('#input-svg').val(exampleSvg);
    $('#original-preview').html(exampleSvg);
    updateStats(exampleSvg, exampleSvg);
  });
  $('#input-svg').on('input', function() {
    const inputSvg = $(this).val();
    if (inputSvg) {
      try {
        $('#original-preview').html(inputSvg);
        updateStats(inputSvg, inputSvg);
      } catch (e) {
        console.error("Error al actualizar la previsualización:", e);
      }
    } else {
      $('#original-preview').html('');
      $('#original-size').text('Tamaño original: 0 bytes');
      $('#optimized-size').text('Tamaño optimizado: 0 bytes');
      $('#reduction').text('Reducción: 0.0%');
    }
  });
  setupMainButtons();
}
function setupMainButtons() {
  $('#optimize-btn').on('click', function() {
    const inputSvg = $('#input-svg').val();
    if (!inputSvg) {
      showNotification($(this), 'No hay SVG para optimizar', 3000);
      return;
    }
    try {
      let optimizedSvg = optimizeSvg(inputSvg);
      $('#output-svg').val(optimizedSvg);
      $('#original-preview').html(inputSvg);
      $('#optimized-preview').html(optimizedSvg);
      updateStats(inputSvg, optimizedSvg);
      copyToClipboard(optimizedSvg);
      showNotification($(this), 'Optimizado!');
    } catch (error) {
      console.error('Error durante la optimización:', error);
      showNotification($(this), 'Error al optimizar', 3000);
    }
  });
  $('#clear-btn').on('click', function() {
    $('#input-svg, #output-svg').val('');
    $('#original-preview, #optimized-preview').html('');
    $('#original-size').text('Tamaño original: 0 bytes');
    $('#optimized-size').text('Tamaño optimizado: 0 bytes');
    $('#reduction').text('Reducción: 0.0%');
    showNotification($(this), 'Limpiado');
  });
  $('#download-btn').on('click', function() {
    const svgContent = $('#output-svg').val();
    if (!svgContent) {
      showNotification($(this), 'No hay SVG para descargar', 3000);
      return;
    }
    try {
      const blob = new Blob([svgContent], {type: 'image/svg+xml'});
      const url = URL.createObjectURL(blob);
      const a = $('<a>', {
        href: url,
        download: 'optimized-svg.svg'
      }).appendTo('body');
      a[0].click();
      a.remove();
      URL.revokeObjectURL(url);
      showNotification($(this), '&#161;Descargado!');
    } catch (error) {
      console.error('Error al descargar:', error);
      showNotification($(this), 'Error al descargar', 3000);
    }
  });
  $('#copy-btn').on('click', function() {
    const outputSvg = $('#output-svg').val();
    if (!outputSvg) {
      showNotification($(this), 'No hay SVG para copiar', 3000);
      return;
    }
    copyToClipboard(outputSvg);
    showNotification($(this), '&#161;Copiado!');
  });
}
function copyToClipboard(text) {
  try {
    if (navigator.clipboard && navigator.clipboard.writeText) {
      navigator.clipboard.writeText(text)
        .catch(err => {
          console.warn('Error con clipboard API, usando método alternativo:', err);
          copyUsingExecCommand(text);
        });
    } else {
      copyUsingExecCommand(text);
    }
    return true;
  } catch (err) {
    console.error('Error al copiar al portapapeles:', err);
    return false;
  }
}
function copyUsingExecCommand(text) {
  const textarea = $('<textarea>')
    .val(text)
    .css({
      position: 'fixed',
      opacity: 0
    })
    .appendTo('body');
  textarea[0].select();
  document.execCommand('copy');
  textarea.remove();
}
function optimizeSvg(svg) {
  if (!svg || typeof svg !== 'string') {
    throw new Error('SVG inválido');
  }
  const parser = new DOMParser();
  const doc = parser.parseFromString(svg, 'image/svg+xml');
  const parserError = doc.querySelector('parsererror');
  if (parserError) {
    throw new Error('Error al parsear SVG: ' + parserError.textContent);
  }
  const svgElement = doc.documentElement;
  const removeLinearGradient = $('#dlgradient').prop('checked');
  const removeRadialGradient = $('#dggradient').prop('checked');
  const removeDefs = $('#dgdefs').prop('checked');
  const removeFilters = $('#dfilters').prop('checked');
  const removeMetadata = $('#dmetadata').prop('checked');
  const removeComments = $('#dcomments').prop('checked');
  const removeStyles = $('#dstyles').prop('checked');
  const removeScripts = $('#dscripts').prop('checked');
  const removeTitles = $('#dtitles').prop('checked');
  const reducePrecision = $('#rprecision').prop('checked');
  const optimizeColors = $('#rcolors').prop('checked');
  const optimizeViewBox = $('#rviewbox').prop('checked');
  const simplifyTransforms = $('#rtransforms').prop('checked');
  const simplifyPaths = $('#rpaths').prop('checked');
  const removeCDATA = $('#cdata').prop('checked');
  const removeNamespaces = $('#namespaces').prop('checked');
  const removeIds = $('#ids').prop('checked');
  const minifyColors = $('#minifycolors').prop('checked');
  const convertShapes = $('#convertshapes').prop('checked');
  const removeEmpty = $('#removeempty').prop('checked');
  const decimalPrecision = parseInt($('#decimal-precision').val()) || 3;
  try {
    if (removeComments) {
      removeCommentsFromNode(svgElement);
    }
    if (removeMetadata) {
      removeElementsByTagName(svgElement, 'metadata');
    }
    if (removeScripts) {
      removeElementsByTagName(svgElement, 'script');
    }
    if (removeTitles) {
      removeElementsByTagName(svgElement, 'title');
      removeElementsByTagName(svgElement, 'desc');
    }
    if (removeEmpty) {
      removeEmptyAttributesV3(svgElement);
    }
    if (removeLinearGradient) {
      processGradients(svgElement, 'linearGradient', '#333333');
    }
    if (removeRadialGradient) {
      processGradients(svgElement, 'radialGradient', '#555555');
    }
    if (removeFilters) {
      processFilters(svgElement);
    }
    if (removeStyles) {
      removeUnusedStyles(svgElement);
    }
    if (optimizeColors || minifyColors) {
      optimizeSvgColors(svgElement, minifyColors);
    }
    if (reducePrecision) {
      reduceSvgPrecision(svgElement, decimalPrecision);
    }
    if (simplifyTransforms) {
      simplifyTransformations(svgElement);
    }
    if (simplifyPaths) {
      simplifyPathData(svgElement);
    }
    if (optimizeViewBox) {
      optimizeSvgViewBox(svgElement);
    }
    if (removeIds) {
      removeUnusedIds(svgElement);
    }
    if (removeDefs) {
      removeElementsByTagName(svgElement, 'defs');
    } else if (removeEmpty) {
      removeEmptyElements(svgElement, 'defs');
    }
    if (convertShapes) {
      convertShapesToPaths(svgElement);
    }
    const serializer = new XMLSerializer();
    let optimizedSvg = serializer.serializeToString(doc);
    if (removeNamespaces) {
      optimizedSvg = removeUnusedNamespaces(optimizedSvg);
    }
    if (removeCDATA) {
      optimizedSvg = optimizedSvg.replace(/<!\[CDATA\[([\s\S]*?)\]\]>/g, '$1');
    }
    optimizedSvg = optimizedSvg.replace(/\s+xmlns(:.*?)?=""\s+/g, ' ');
    optimizedSvg = optimizedSvg.replace(/\s+style=""\s+/g, ' ');
    optimizedSvg = optimizedSvg.replace(/\s+class=""\s+/g, ' ');
    optimizedSvg = optimizedSvg.replace(/\s{2,}/g, ' ');
    return optimizedSvg;
  } catch (error) {
    console.error('Error durante la optimización:', error);
    throw new Error('Error al optimizar SVG: ' + error.message);
  }
}
function processGradients(svgElement, gradientType, fallbackColor) {
  const gradients = svgElement.querySelectorAll(gradientType);
  const gradientIds = new Set();
  gradients.forEach(gradient => {
    if (gradient.id) gradientIds.add(gradient.id);
  });
  replaceGradientReferences(svgElement, gradientIds, fallbackColor);
  gradients.forEach(gradient => {
    if (gradient.parentNode) {
      gradient.parentNode.removeChild(gradient);
    }
  });
}
function processFilters(svgElement) {
  const filters = svgElement.querySelectorAll('filter');
  const filterIds = new Set();
  filters.forEach(filter => {
    if (filter.id) filterIds.add(filter.id);
  });
  removeFilterReferences(svgElement, filterIds);
  filters.forEach(filter => {
    if (filter.parentNode) {
      filter.parentNode.removeChild(filter);
    }
  });
}
function removeEmptyAttributesV3(element) {
  const allElements = element.getElementsByTagName('*');
  for (let i = 0; i < allElements.length; i++) {
    const el = allElements[i];
    for (let j = el.attributes.length - 1; j >= 0; j--) {
      const attr = el.attributes[j];
      if (attr.value.trim() === '') {
        el.removeAttribute(attr.name);
      }
    }
  }
  for (let j = element.attributes.length - 1; j >= 0; j--) {
    const attr = element.attributes[j];
    if (attr.value.trim() === '') {
      element.removeAttribute(attr.name);
    }
  }
}
function removeEmptyElements(element, tagName) {
  const elements = element.getElementsByTagName(tagName);
  for (let i = elements.length - 1; i >= 0; i--) {
    const el = elements[i];
    if (!el.hasChildNodes() || el.children.length === 0) {
      if (el.parentNode) {
        el.parentNode.removeChild(el);
      }
    }
  }
}
function removeUnusedStyles(svgElement) {
  const styleElements = svgElement.querySelectorAll('style');
  styleElements.forEach(style => {
    if (!style.textContent.trim()) {
      style.parentNode.removeChild(style);
    }
  });
  const elementsWithStyle = svgElement.querySelectorAll('[style]');
  elementsWithStyle.forEach(el => {
    const styleValue = el.getAttribute('style');
    if (!styleValue || styleValue.trim() === '') {
      el.removeAttribute('style');
    }
  });
}
function optimizeSvgColors(svgElement, minify) {
  const colorAttributes = ['fill', 'stroke', 'stop-color', 'flood-color', 'lighting-color'];
  colorAttributes.forEach(attr => {
    const elements = svgElement.querySelectorAll(`[${attr}]`);
    elements.forEach(el => {
      const colorValue = el.getAttribute(attr);
      if (colorValue && !colorValue.startsWith('url(')) {
        let optimizedColor = colorValue;
        if (optimizedColor.startsWith('rgb(')) {
          optimizedColor = rgbToHex(optimizedColor);
        }
        if (minify && optimizedColor.startsWith('#')) {
          optimizedColor = minifyHexColor(optimizedColor);
        }
        if (optimizedColor !== colorValue) {
          el.setAttribute(attr, optimizedColor);
        }
      }
    });
  });
}
function rgbToHex(rgb) {
  const match = rgb.match(/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/);
  if (!match) return rgb;
  const r = parseInt(match[1]);
  const g = parseInt(match[2]);
  const b = parseInt(match[3]);
  return `#${((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1)}`;
}
function minifyHexColor(hex) {
  const match = hex.match(/#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])/i);
  if (match && match[1] === match[2] && match[3] === match[4] && match[5] === match[6]) {
    return `#${match[1]}${match[3]}${match[5]}`;
  }
  return hex;
}
function reduceSvgPrecision(svgElement, precision) {
  const numericAttributes = [
    'x', 'y', 'x1', 'y1', 'x2', 'y2', 'cx', 'cy', 'r', 'rx', 'ry',
    'width', 'height', 'stroke-width', 'stroke-dasharray', 'stroke-dashoffset',
    'font-size', 'opacity', 'fill-opacity', 'stroke-opacity'
  ];
  function roundNumber(value, precision) {
    if (isNaN(parseFloat(value))) return value;
    return parseFloat(parseFloat(value).toFixed(precision)).toString();
  }
  numericAttributes.forEach(attr => {
    const elements = svgElement.querySelectorAll(`[${attr}]`);
    elements.forEach(el => {
      const value = el.getAttribute(attr);
      const roundedValue = roundNumber(value, precision);
      if (value !== roundedValue) {
        el.setAttribute(attr, roundedValue);
      }
    });
  });
  const paths = svgElement.querySelectorAll('path');
  paths.forEach(path => {
    const d = path.getAttribute('d');
    if (d) {
      const roundedD = d.replace(/[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?/g, match => {
        return roundNumber(match, precision);
      });
      if (d !== roundedD) {
        path.setAttribute('d', roundedD);
      }
    }
  });
  const pointsElements = svgElement.querySelectorAll('polygon, polyline');
  pointsElements.forEach(el => {
    const points = el.getAttribute('points');
    if (points) {
      const roundedPoints = points.replace(/[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?/g, match => {
        return roundNumber(match, precision);
      });
      if (points !== roundedPoints) {
        el.setAttribute('points', roundedPoints);
      }
    }
  });
  const transformElements = svgElement.querySelectorAll('[transform]');
  transformElements.forEach(el => {
    const transform = el.getAttribute('transform');
    if (transform) {
      const roundedTransform = transform.replace(/[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?/g, match => {
        return roundNumber(match, precision);
      });
      if (transform !== roundedTransform) {
        el.setAttribute('transform', roundedTransform);
      }
    }
  });
}
function simplifyTransformations(svgElement) {
  const elementsWithTransform = svgElement.querySelectorAll('[transform]');
  elementsWithTransform.forEach(el => {
    const transform = el.getAttribute('transform');
    if (transform === 'matrix(1 0 0 1 0 0)' || transform === 'scale(1)' || 
        transform === 'translate(0,0)' || transform === 'rotate(0)' ||
        transform === 'translate(0 0)' || transform === 'scale(1 1)') {
      el.removeAttribute('transform');
    }
    const matrixMatch = transform.match(/matrix\(1 0 0 1 ([-\d.]+) ([-\d.]+)\)/);
    if (matrixMatch) {
      el.setAttribute('transform', `translate(${matrixMatch[1]} ${matrixMatch[2]})`);
    }
  });
}
function optimizeSvgViewBox(svgElement) {
  const viewBox = svgElement.getAttribute('viewBox');
  if (viewBox) {
    const parts = viewBox.split(/[\s,]+/).map(parseFloat);
    if (parts.length === 4) {
      for (let i = 0; i < 4; i++) {
        if (Math.abs(parts[i] - Math.round(parts[i])) < 0.001) {
          parts[i] = Math.round(parts[i]);
        }
      }
      const optimizedViewBox = parts.join(' ');
      if (optimizedViewBox !== viewBox) {
        svgElement.setAttribute('viewBox', optimizedViewBox);
      }
    }
  }
}
function removeCommentsFromNode(node) {
  const childNodes = node.childNodes;
  for (let i = childNodes.length - 1; i >= 0; i--) {
    const child = childNodes[i];
    if (child.nodeType === 8) { 
      node.removeChild(child);
    } else if (child.nodeType === 1) { 
      removeCommentsFromNode(child);
    }
  }
}
function removeElementsByTagName(parent, tagName) {
  const elements = parent.getElementsByTagName(tagName);
  while (elements.length > 0) {
    if (elements[0].parentNode) {
      elements[0].parentNode.removeChild(elements[0]);
    }
  }
}
function replaceGradientReferences(element, gradientIds, fallbackColor) {
  const elementsWithFill = element.querySelectorAll('[fill^="url(#"]');
  const elementsWithStroke = element.querySelectorAll('[stroke^="url(#"]');
  elementsWithFill.forEach(el => {
    const fillValue = el.getAttribute('fill');
    const match = fillValue.match(/url\(#([^)]+)\)/);
    if (match && gradientIds.has(match[1])) {
      el.setAttribute('fill', fallbackColor);
    }
  });
  elementsWithStroke.forEach(el => {
    const strokeValue = el.getAttribute('stroke');
    const match = strokeValue.match(/url\(#([^)]+)\)/);
    if (match && gradientIds.has(match[1])) {
      el.setAttribute('stroke', fallbackColor);
    }
  });
  const elementsWithStyle = element.querySelectorAll('[style*="url(#"]');
  elementsWithStyle.forEach(el => {
    const styleValue = el.getAttribute('style');
    if (styleValue) {
      let newStyle = styleValue;
      gradientIds.forEach(id => {
        const regex = new RegExp(`url\\(#${id}\\)`, 'g');
        newStyle = newStyle.replace(regex, fallbackColor);
      });
      if (newStyle !== styleValue) {
        el.setAttribute('style', newStyle);
      }
    }
  });
}
function removeFilterReferences(element, filterIds) {
  const elementsWithFilter = element.querySelectorAll('[filter^="url(#"]');
  elementsWithFilter.forEach(el => {
    const filterValue = el.getAttribute('filter');
    const match = filterValue.match(/url\(#([^)]+)\)/);
    if (match && filterIds.has(match[1])) {
      el.removeAttribute('filter');
    }
  });
  const elementsWithStyle = element.querySelectorAll('[style*="filter:"]');
  elementsWithStyle.forEach(el => {
    const styleValue = el.getAttribute('style');
    if (styleValue) {
      let newStyle = styleValue;
      filterIds.forEach(id => {
        const regex = new RegExp(`filter:\\s*url\\(#${id}\\)`, 'g');
        newStyle = newStyle.replace(regex, '');
      });
      newStyle = newStyle.replace(/;\s*;/g, ';').replace(/^\s*;|;\s*$/g, '');
      if (newStyle !== styleValue) {
        if (newStyle.trim() === '') {
          el.removeAttribute('style');
        } else {
          el.setAttribute('style', newStyle);
        }
      }
    }
  });
}
function removeUnusedIds(svgElement) {
  const elementsWithId = svgElement.querySelectorAll('[id]');
  const allIds = new Set();
  elementsWithId.forEach(el => {
    allIds.add(el.id);
  });
  const svgString = new XMLSerializer().serializeToString(svgElement);
  const referencedIds = new Set();
  allIds.forEach(id => {
    const refRegex = new RegExp(`url\\(#${id}\\)|href="#${id}"|aria-labelledby="${id}"|aria-describedby="${id}"`, 'g');
    if (svgString.match(refRegex)) {
      referencedIds.add(id);
    }
  });
  elementsWithId.forEach(el => {
    if (!referencedIds.has(el.id)) {
      el.removeAttribute('id');
    }
  });
}
function removeUnusedNamespaces(svgString) {
  const usedNamespaces = new Set();
  const namespaceRegex = /xmlns:([a-z0-9]+)=/gi;
  let match;
  const declaredNamespaces = new Set();
  while ((match = namespaceRegex.exec(svgString)) !== null) {
    declaredNamespaces.add(match[1]);
  }
  declaredNamespaces.forEach(ns => {
    const nsRegex = new RegExp(`${ns}:`, 'g');
    if (svgString.match(nsRegex)) {
      usedNamespaces.add(ns);
    }
  });
  declaredNamespaces.forEach(ns => {
    if (!usedNamespaces.has(ns)) {
      const nsAttrRegex = new RegExp(`xmlns:${ns}="[^"]*"\\s*`, 'g');
      svgString = svgString.replace(nsAttrRegex, '');
    }
  });
  svgString = svgString.replace(/\s+xmlns=""\s+/g, ' ');
  return svgString;
}
function simplifyPathData(svgElement) {
  const paths = svgElement.querySelectorAll('path');
  paths.forEach(path => {
    const d = path.getAttribute('d');
    if (d) {
      let simplifiedD = d
        .replace(/\s+/g, ' ')
        .replace(/,/g, ' ')
        .replace(/\s*([MmLlHhVvCcSsQqTtAaZz])\s*/g, '$1')
        .replace(/(\s|^)0\./g, '$1.')
        .replace(/(\d+)\.0+(\s|$)/g, '$1$2')
        .replace(/\s{2,}/g, ' ')
        .trim();
      path.setAttribute('d', simplifiedD);
    }
  });
}
function convertShapesToPaths(svgElement) {
  const rects = svgElement.querySelectorAll('rect');
  rects.forEach(rect => {
    try {
      const x = parseFloat(rect.getAttribute('x') || 0);
      const y = parseFloat(rect.getAttribute('y') || 0);
      const width = parseFloat(rect.getAttribute('width') || 0);
      const height = parseFloat(rect.getAttribute('height') || 0);
      if (width > 0 && height > 0) {
        const pathData = `M${x},${y}h${width}v${height}h-${width}z`;
        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
        path.setAttribute('d', pathData);
        for (let i = 0; i < rect.attributes.length; i++) {
          const attr = rect.attributes[i];
          if (!['x', 'y', 'width', 'height'].includes(attr.name)) {
            path.setAttribute(attr.name, attr.value);
          }
        }
        if (rect.parentNode) {
          rect.parentNode.replaceChild(path, rect);
        }
      }
    } catch (e) {
      console.warn('Error al convertir rectángulo a path:', e);
    }
  });
}
function removeDuplicateElements(svgElement) {
  const allElements = svgElement.getElementsByTagName('*');
  const elementsToRemove = [];
  const elementFingerprints = new Map();
  for (let i = 0; i < allElements.length; i++) {
    const el = allElements[i];
    let fingerprint = el.tagName;
    const attrs = [];
    for (let j = 0; j < el.attributes.length; j++) {
      const attr = el.attributes[j];
      attrs.push(`${attr.name}="${attr.value}"`);
    }
    attrs.sort();
    fingerprint += attrs.join('');
    if (el.textContent) {
      fingerprint += el.textContent.trim();
    }
    if (elementFingerprints.has(fingerprint)) {
      elementsToRemove.push(el);
    } else {
      elementFingerprints.set(fingerprint, el);
    }
  }
  elementsToRemove.forEach(el => {
    if (el.parentNode) {
      el.parentNode.removeChild(el);
    }
  });
  return elementsToRemove.length; 
}
function optimizeAttributeOrder(svgElement) {
  const attributeOrder = [
    'id', 'class', 'style',
    'x', 'y', 'width', 'height',
    'cx', 'cy', 'r', 'rx', 'ry',
    'd', 'points',
    'fill', 'stroke', 'stroke-width',
    'transform',
    'viewBox',
    'xmlns'
  ];
  const attributePriority = new Map();
  attributeOrder.forEach((attr, index) => {
    attributePriority.set(attr, index);
  });
  function getPriority(attrName) {
    return attributePriority.has(attrName) ? attributePriority.get(attrName) : 999;
  }
  const allElements = svgElement.getElementsByTagName('*');
  for (let i = 0; i < allElements.length; i++) {
    const el = allElements[i];
    const attributes = [];
    for (let j = 0; j < el.attributes.length; j++) {
      attributes.push({
        name: el.attributes[j].name,
        value: el.attributes[j].value
      });
    }
    attributes.sort((a, b) => {
      return getPriority(a.name) - getPriority(b.name);
    });
    while (el.attributes.length > 0) {
      el.removeAttribute(el.attributes[0].name);
    }
    attributes.forEach(attr => {
      el.setAttribute(attr.name, attr.value);
    });
  }
  const rootAttributes = [];
  for (let j = 0; j < svgElement.attributes.length; j++) {
    rootAttributes.push({
      name: svgElement.attributes[j].name,
      value: svgElement.attributes[j].value
    });
  }
  rootAttributes.sort((a, b) => {
    return getPriority(a.name) - getPriority(b.name);
  });
  while (svgElement.attributes.length > 0) {
    svgElement.removeAttribute(svgElement.attributes[0].name);
  }
  rootAttributes.forEach(attr => {
    svgElement.setAttribute(attr.name, attr.value);
  });
}
function removeInvisibleElements(svgElement) {
  const zeroOpacityElements = svgElement.querySelectorAll('[opacity="0"]');
  zeroOpacityElements.forEach(el => {
    if (el.parentNode) {
      el.parentNode.removeChild(el);
    }
  });
  const hiddenElements = svgElement.querySelectorAll('[display="none"]');
  hiddenElements.forEach(el => {
    if (el.parentNode) {
      el.parentNode.removeChild(el);
    }
  });
  const invisibleElements = svgElement.querySelectorAll('[visibility="hidden"]');
  invisibleElements.forEach(el => {
    if (el.parentNode) {
      el.parentNode.removeChild(el);
    }
  });
  const noFillStrokeElements = svgElement.querySelectorAll('[fill="none"]:not([stroke]), [fill="none"][stroke="none"]');
  noFillStrokeElements.forEach(el => {
    if (el.parentNode && !el.hasChildNodes()) {
      el.parentNode.removeChild(el);
    }
  });
  const zeroSizeElements = svgElement.querySelectorAll('[width="0"], [height="0"], [width="0px"], [height="0px"]');
  zeroSizeElements.forEach(el => {
    if (el.parentNode) {
      el.parentNode.removeChild(el);
    }
  });
}
function optimizeUnits(svgElement) {
  const unitAttributes = [
    'width', 'height', 'x', 'y', 'x1', 'y1', 'x2', 'y2',
    'cx', 'cy', 'r', 'rx', 'ry', 'stroke-width', 'font-size'
  ];
  const allElements = svgElement.getElementsByTagName('*');
  for (let i = 0; i < allElements.length; i++) {
    const el = allElements[i];
    unitAttributes.forEach(attr => {
      if (el.hasAttribute(attr)) {
        const value = el.getAttribute(attr);
        if (value.endsWith('px')) {
          el.setAttribute(attr, value.slice(0, -2));
        }
        if (value === '0.0' || value === '0.00' || value === '0.000') {
          el.setAttribute(attr, '0');
        }
      }
    });
  }
  unitAttributes.forEach(attr => {
    if (svgElement.hasAttribute(attr)) {
      const value = svgElement.getAttribute(attr);
      if (value.endsWith('px')) {
        svgElement.setAttribute(attr, value.slice(0, -2));
      }
      if (value === '0.0' || value === '0.00' || value === '0.000') {
        svgElement.setAttribute(attr, '0');
      }
    }
  });
}
function applyFinalOptimizations(svgString) {
  svgString = svgString.replace(/<\?xml.*?\?>\s*/g, '');
  svgString = svgString.replace(/<!DOCTYPE.*?>\s*/g, '');
  svgString = svgString.replace(/\s+([a-z-]+)=""/gi, '');
  svgString = svgString.replace(/\s+xmlns(:.*?)?=""/g, '');
  svgString = svgString.replace(/\s+style=""/g, '');
  svgString = svgString.replace(/\s+style="\s*"/g, '');
  svgString = svgString.replace(/\s+class=""/g, '');
  svgString = svgString.replace(/\s{2,}/g, ' ');
  svgString = svgString.replace(/>\s+</g, '><');
  svgString = svgString.trim();
  svgString = svgString.replace(/\s*=\s*/g, '=');
  return svgString;
}
function enhancePreviewDisplay() {
  const previewBoxes = document.querySelectorAll('.preview-box');
  previewBoxes.forEach(box => {
    box.classList.add('transparent-bg');
    const zoomControls = document.createElement('div');
    zoomControls.className = 'zoom-controls';
    zoomControls.innerHTML = `
      <button class="zoom-in">+</button>
      <button class="zoom-reset">Reset</button>
      <button class="zoom-out">-</button>
    `;
    box.parentNode.insertBefore(zoomControls, box.nextSibling);
    const svgContainer = box;
    let scale = 1;
    zoomControls.querySelector('.zoom-in').addEventListener('click', () => {
      scale *= 1.2;
      svgContainer.style.transform = `scale(${scale})`;
    });
    zoomControls.querySelector('.zoom-out').addEventListener('click', () => {
      scale /= 1.2;
      svgContainer.style.transform = `scale(${scale})`;
    });
    zoomControls.querySelector('.zoom-reset').addEventListener('click', () => {
      scale = 1;
      svgContainer.style.transform = 'scale(1)';
    });
  });
}
function addCustomStyles() {
  const styleElement = document.createElement('style');
  styleElement.textContent = `
    .significant-reduction {
      color: #4CAF50;
      font-weight: bold;
    }
    .transparent-bg {
      background-image: linear-gradient(45deg, #f0f0f0 25%, transparent 25%),
                        linear-gradient(-45deg, #f0f0f0 25%, transparent 25%),
                        linear-gradient(45deg, transparent 75%, #f0f0f0 75%),
                        linear-gradient(-45deg, transparent 75%, #f0f0f0 75%);
      background-size: 20px 20px;
      background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
    }
    .zoom-controls {
      margin-top: 5px;
      text-align: center;
    }
    .zoom-controls button {
      margin: 0 5px;
      padding: 2px 8px;
      background: #f0f0f0;
      border: 1px solid #ccc;
      border-radius: 3px;
      cursor: pointer;
    }
    .zoom-controls button:hover {
      background: #e0e0e0;
    }
    .preview-box {
      transition: transform 0.2s ease;
      transform-origin: center center;
    }
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 10px 20px;
      border-radius: 4px;
      z-index: 1000;
      animation: fadeInOut 2.5s ease;
    }
    @keyframes fadeInOut {
      0% { opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% { opacity: 0; }
    }
  `;
  document.head.appendChild(styleElement);
}
function showFloatingNotification(message) {
  const notification = document.createElement('div');
  notification.className = 'notification';
  notification.textContent = message;
  document.body.appendChild(notification);
  setTimeout(() => {
    if (notification.parentNode) {
      notification.parentNode.removeChild(notification);
    }
  }, 2500);
}
function enhanceOptimizeButton() {
  const optimizeBtn = document.getElementById('optimize-btn');
  if (!optimizeBtn) return;
  const originalText = optimizeBtn.textContent;
  optimizeBtn.removeEventListener('click', null);
  optimizeBtn.addEventListener('click', function() {
    const inputSvg = $('#input-svg').val();
    if (!inputSvg) {
      showFloatingNotification('No hay SVG para optimizar');
      return;
    }
    this.textContent = 'Optimizando...';
    this.disabled = true;
    setTimeout(() => {
      try {
        let optimizedSvg = optimizeSvg(inputSvg);
        optimizedSvg = applyFinalOptimizations(optimizedSvg);
        $('#output-svg').val(optimizedSvg);
        $('#original-preview').html(inputSvg);
        $('#optimized-preview').html(optimizedSvg);
        updateStats(inputSvg, optimizedSvg);
        copyToClipboard(optimizedSvg);
        showFloatingNotification('&#161;SVG optimizado y copiado al portapapeles!');
      } catch (error) {
        console.error('Error durante la optimización:', error);
        showFloatingNotification('Error al optimizar: ' + error.message);
      } finally {
        this.textContent = originalText;
        this.disabled = false;
      }
    }, 50);
  });
}
function initializeEnhancements() {
  addCustomStyles();
  enhancePreviewDisplay();
  enhanceOptimizeButton();
  setTimeout(() => {
    showFloatingNotification('Optimizador Ultra de SVG V3 listo para usar');
  }, 500);
}
$(document).ready(function() {
  initializeApp();
  initializeEnhancements();
});
// OPTIMIZADOR [END]
  
  
// EDITAR [START]
function editarsvg(){
  $('#Editar').html(`
    <h2 class="txc">Editar svg optimizado</h2>
    <table class="etb">
      <thead>
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>Visualización</th>
          <th>Editar</th>
          <th>Copiar</th>
          <th>Original</th>
          <th>Optimizado</th>
          <th>Logrado</th>
        </tr>
      </thead>
      <tbody>
        ${micon.map((wi, index) => `
          <tr>
            <td>${index + 1}</td>
            <td class="hecho" data-tag="${wi.tag || ''}">${wi.icono || ''}</td>
            <td class="vsvg">
              <svg viewBox="0 0 128 128" class="visu">${wi.ivalue}</svg>
            </td>          
            <td class="tdtx">
              <textarea class="edisvg"><svg viewBox="0 0 128 128">${wi.ivalue}</svg></textarea>
            </td>
            <td class="listo">Copiar</td>
            <td class="spen"></td>
            <td class="sper"></td>
            <td class="swin"></td>
          </tr>
        `).join('')}
      </tbody>
    </table>
  `);
} detm(editarsvg, 350); //Cargando iconos con tiempo 350ms

  
$(document).on('input','.edisvg',function(){
  let vl = $(this).val();
  let dt= $(this).closest('tr').find('.vsvg svg').html(vl)
});
// AGREGANDO VALORES
$(document).on('click','.listo',function(){
  let nm = $(this).siblings('.hecho').text();
  let tg = $(this).siblings('.hecho').data('tag');
  let vl = $(this).siblings('.vsvg').find('svg').html();
  let cd = `{icono:'${nm}', tag:'${tg}', ivalue:'${vl}'},\n`; 
  navigator.clipboard.writeText(cd)
  adtm(this,'good','Copiado ','Copiar',2000)
});
// AGREGANDO TAMAÑO ORIGINAL Y OPTIMIZADO 
function tamx(se){
  $(se).each(function(){
    let se = $(this).siblings('.tdtx').find('.edisvg');
    let zi = new Blob([se.val()]).size;
    $(this).text(zi);
  });    
} detm(()=> tamx('.spen'), 800); // Para original 
// PARA CALCULAR REDUCCIÓN: 
function redux(){
  $('.swin').each(function(){
    let orig = $('.spen').html(), opti = $('.sper').html(); 
    let owin = ((orig - opti) / opti) * 100; 
    $(this).text(owin.toFixed(2)+'%');
  });   
} $(document).on('input','.edisvg',function(){tamx('.sper'); redux()});
   
// GENERAR DATA BASE [END]

  
//DIOS ES PROTECTOR [END MIJQUERY] 
})):setTimeout(mijQuery,50)}let lQt=7000,lQv=0,lQz=!localStorage.getItem('wquery');lQz?(["scroll","mousemove"].forEach(e=>addEventListener(e,ldjQuery)),setTimeout(ldjQuery,lQt)):ldjQuery();function ldjQuery(){if(!lQv){lQv=1;lQz&&["scroll","mousemove"].forEach(e=>removeEventListener(e,ldjQuery));let s=document.createElement("script");s.src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js";s.onload=()=>{localStorage.setItem("wquery","wiii");mijQuery()};document.head.appendChild(s)}}
//THEMES WEB[START]
const mthemas=[{tnm:"Cielo",co:"#0EBEFF"},{tnm:"Dulce",co:"#FF5C69"},{tnm:"Paz",co:"#29C72E"},{tnm:"Mora",co:"#7000FF"},{tnm:"Futuro",co:"#21273B"}];const thcon=document.createElement('div');thcon.className='mthemes';mthemas.forEach(({tnm,co})=>{const tdv=document.createElement('div');tdv.className='tema';tdv.dataset.tema=`${tnm}|${co}`;tdv.style.background=co;tdv.onclick=()=>mithm(tdv);thcon.appendChild(tdv);});document.body.appendChild(thcon);const mithm=e=>{const [th,tco]=e.dataset.tema.split('|');document.documentElement.dataset.theme=th;(document.querySelector('meta[name="theme-color"]')||Object.assign(document.head.appendChild(document.createElement('meta')),{name:'theme-color'})).content=tco;localStorage.mtheme=e.dataset.tema;document.querySelector('.mtha')?.classList.remove('mtha');e.classList.add('mtha');};const thsved=document.querySelector(`[data-tema="${localStorage.mtheme}"]`)||thcon.firstChild;if(thsved)mithm(thsved);
</script>

</body>
</html>